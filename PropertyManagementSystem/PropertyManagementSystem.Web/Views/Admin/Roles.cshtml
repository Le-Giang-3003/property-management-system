@model List<PropertyManagementSystem.BLL.DTOs.Admin.RoleDto>
@{
    ViewData["Title"] = "Roles & Permissions";
    Layout = "_AuthLayout";
}

<style>
    .roles-container { padding: 10px 0; }
    .roles-header { margin-bottom: 24px; }
    .roles-header h1 { font-size: 28px; font-weight: 700; color: #1e293b; margin: 0 0 5px; }
    .roles-header p { color: #64748b; margin: 0; font-size: 14px; }
    .roles-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); gap: 20px; }
    .role-card { background: white; border-radius: 16px; padding: 24px; border: 1px solid #e2e8f0; transition: all 0.2s; }
    .role-card:hover { box-shadow: 0 4px 12px rgba(0,0,0,0.05); }
    .role-icon { width: 48px; height: 48px; border-radius: 12px; display: flex; align-items: center; justify-content: center; margin-bottom: 16px; font-size: 22px; }
    .role-icon.admin { background: #fee2e2; color: #dc2626; }
    .role-icon.member { background: #dbeafe; color: #2563eb; }
    .role-icon.technician { background: #ffedd5; color: #ea580c; }
    .role-name { font-size: 18px; font-weight: 600; color: #1e293b; margin-bottom: 4px; }
    .role-desc { font-size: 14px; color: #64748b; margin-bottom: 16px; min-height: 40px; }
    .role-count { font-size: 24px; font-weight: 700; color: #1e293b; }
    .role-count-label { font-size: 13px; color: #64748b; }
    .role-link { display: inline-flex; align-items: center; gap: 6px; margin-top: 16px; color: #2563eb; text-decoration: none; font-size: 14px; font-weight: 500; }
    .role-link:hover { color: #1d4ed8; }
    .info-box { background: #f0f9ff; border: 1px solid #bae6fd; border-radius: 12px; padding: 16px; margin-bottom: 24px; font-size: 14px; color: #0369a1; }
</style>

<div class="roles-container">
    <div class="roles-header">
        <h1>Roles & Permissions</h1>
        <p>System roles: Admin, Member, Technician. Assign roles via user management.</p>
    </div>

    <div class="info-box">
        <strong>Note:</strong> Only these three roles are used. Members can act as Landlord or Tenant based on property/lease. Permissions are role-based; assign roles in <a href="@Url.Action("Users", "Admin")">Manage Users</a>.
    </div>

    <div class="roles-grid">
        @if (Model != null && Model.Any())
        {
            foreach (var role in Model)
            {
                var iconClass = role.RoleName.Equals("Admin", StringComparison.OrdinalIgnoreCase) ? "admin" : role.RoleName.Equals("Technician", StringComparison.OrdinalIgnoreCase) ? "technician" : "member";
                <div class="role-card">
                    <div class="role-icon @iconClass">
                        @if (role.RoleName == "Admin") { <i class="bi bi-shield-lock"></i> }
                        else if (role.RoleName == "Technician") { <i class="bi bi-wrench"></i> }
                        else { <i class="bi bi-person"></i> }
                    </div>
                    <div class="role-name">@role.RoleName</div>
                    <div class="role-desc">@(role.Description ?? "â€”")</div>
                    <div class="role-count">@role.UserCount</div>
                    <div class="role-count-label">Users</div>
                    <a href="@Url.Action("Users", "Admin", new { role = role.RoleName })" class="role-link">
                        <i class="bi bi-people"></i> View users
                    </a>
                </div>
            }
        }
        else
        {
            <div class="text-center py-5">
                <i class="bi bi-shield-x" style="font-size: 48px; color: #cbd5e1;"></i>
                <p class="text-muted mt-3">No roles found.</p>
            </div>
        }
    </div>
</div>
